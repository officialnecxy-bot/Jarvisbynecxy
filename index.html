<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J.A.R.V.I.S - HINDI</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Teko:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff2a2a; /* Red */
            --dark: #000000;
            --glass: rgba(255, 42, 42, 0.1);
            --text: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }

        body {
            background-color: var(--dark);
            color: var(--text);
            font-family: 'Rajdhani', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-image: radial-gradient(circle at center, #1a0000 0%, #000000 80%);
            overflow: hidden;
        }

        /* --- UI ELEMENTS --- */
        .interface-box {
            width: 300px; height: 300px;
            border-radius: 50%;
            border: 2px solid rgba(255, 42, 42, 0.3);
            display: flex; justify-content: center; align-items: center;
            position: relative;
            box-shadow: 0 0 30px rgba(255, 42, 42, 0.2);
            cursor: pointer;
            transition: 0.3s;
        }

        .interface-box:active { transform: scale(0.95); }

        .core-ring {
            position: absolute; width: 90%; height: 90%;
            border-radius: 50%; border: 5px dashed var(--primary);
            animation: spin 10s linear infinite; opacity: 0.5;
        }

        .core-center {
            width: 100px; height: 100px;
            background: radial-gradient(circle, #ff5e5e 0%, #500000 100%);
            border-radius: 50%;
            box-shadow: 0 0 50px var(--primary);
            display: flex; justify-content: center; align-items: center;
            font-size: 1.5rem; font-weight: 900;
            color: black;
            text-shadow: 0 0 5px white;
        }

        .interface-box.active .core-center {
            animation: pulse 1s infinite alternate;
            background: white; box-shadow: 0 0 80px var(--primary);
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.1); box-shadow: 0 0 100px var(--primary); } }

        .status-text {
            margin-top: 40px; font-size: 2rem; font-family: 'Teko', sans-serif;
            text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 10px var(--primary);
        }

        .sub-text {
            font-size: 1rem; color: rgba(255,255,255,0.6); margin-top: 10px; text-align: center; max-width: 80%;
        }

    </style>
</head>
<body>

    <div class="interface-box" id="mic-btn" onclick="jarvis.toggle()">
        <div class="core-ring"></div>
        <div class="core-center">AI</div>
    </div>

    <div class="status-text" id="status">TAP TO START</div>
    <div class="sub-text" id="transcript">सिस्टम ऑफलाइन है</div>

<script>
    // --- API KEY (Fixed) ---
    const API_KEY = "AIzaSyAzINqsAHdMMLiXpLCwet0O540MB5xX5qg"; 

    const jarvis = {
        recognition: null,
        isListening: false,
        
        init: () => {
            if ('webkitSpeechRecognition' in window) {
                jarvis.recognition = new webkitSpeechRecognition();
                jarvis.recognition.continuous = false;
                
                // Set language to HINDI
                jarvis.recognition.lang = 'hi-IN'; 
                jarvis.recognition.interimResults = false;

                jarvis.recognition.onstart = () => {
                    jarvis.isListening = true;
                    jarvis.updateUI("सुन रहा हूँ...", "Listening...", true);
                };

                jarvis.recognition.onend = () => {
                    jarvis.isListening = false;
                    if(!window.speechSynthesis.speaking) {
                        jarvis.updateUI("तैयार हूँ", "Ready", false);
                    }
                };

                jarvis.recognition.onresult = (event) => {
                    const text = event.results[0][0].transcript;
                    jarvis.updateUI("सोच रहा हूँ...", `"${text}"`, true);
                    jarvis.processCommand(text);
                };

                jarvis.updateUI("नमस्ते सर", "Tap to Activate", false);
                // Pre-load voices
                window.speechSynthesis.getVoices();
            } else {
                alert("Hindi Voice Support not available. Use Chrome.");
            }
        },

        toggle: () => {
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
                jarvis.updateUI("रोका गया", "Stopped", false);
                return;
            }
            if (jarvis.isListening) jarvis.recognition.stop();
            else jarvis.recognition.start();
        },

        updateUI: (status, sub, active) => {
            document.getElementById('status').innerText = status;
            document.getElementById('transcript').innerText = sub;
            const btn = document.getElementById('mic-btn');
            if(active) btn.classList.add('active');
            else btn.classList.remove('active');
        },

        speak: (text) => {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            
            // Set Language to Hindi
            utterance.lang = 'hi-IN';
            
            // Try to find a Hindi Male Voice (Google Hindi)
            const voices = window.speechSynthesis.getVoices();
            const hindiVoice = voices.find(v => v.lang === 'hi-IN' || v.name.includes('Hindi'));
            
            if(hindiVoice) utterance.voice = hindiVoice;
            
            utterance.rate = 0.9; // Slightly slower for clarity
            utterance.pitch = 0.8; // Deep voice

            jarvis.updateUI("बोल रहा हूँ...", "Speaking...", true);
            
            utterance.onend = () => {
                jarvis.updateUI("तैयार हूँ", "Ready", false);
            };

            window.speechSynthesis.speak(utterance);
        },

        processCommand: async (cmd) => {
            const command = cmd.toLowerCase();

            // Local Hindi Commands
            if (command.includes("time") || command.includes("समय") || command.includes("time kya hai")) {
                const date = new Date();
                let hours = date.getHours();
                let minutes = date.getMinutes();
                let ampm = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12;
                hours = hours ? hours : 12; 
                jarvis.speak("अभी समय है " + hours + " बज कर " + minutes + " मिनट " + ampm);
            } 
            else if (command.includes("kaun ho") || command.includes("tum kaun ho")) {
                jarvis.speak("मैं जार्विस हूँ, आपका एआई असिस्टेंट।");
            }
            else if (command.includes("google") || command.includes("search")) {
                jarvis.speak("गूगल खोल रहा हूँ सर।");
                window.open("https://google.com", "_blank");
            }
            else if (command.includes("youtube")) {
                jarvis.speak("यूट्यूब चालू कर रहा हूँ।");
                window.open("https://youtube.com", "_blank");
            }
            else {
                // Send to Gemini AI for Hindi Response
                await jarvis.askGemini(cmd);
            }
        },

        askGemini: async (prompt) => {
            try {
                // Using Gemini Pro model
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ 
                            parts: [{ 
                                text: "You are Jarvis AI. Reply in HINDI language only. Keep answer short (max 2 sentences). User asks: " + prompt 
                            }] 
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.candidates && data.candidates.length > 0) {
                    const reply = data.candidates[0].content.parts[0].text;
                    // Remove stars/formatting for clean speech
                    const cleanReply = reply.replace(/[*#]/g, '');
                    jarvis.speak(cleanReply);
                } else {
                    jarvis.speak("माफ़ कीजिये सर, मुझे समझ नहीं आया।");
                }

            } catch (error) {
                console.error(error);
                jarvis.speak("सर, इंटरनेट कनेक्शन में कुछ समस्या है।");
                jarvis.updateUI("ERROR", "API Error", false);
            }
        }
    };

    // Load voices immediately
    window.speechSynthesis.onvoiceschanged = () => {
        console.log("Voices loaded");
    };
    
    window.onload = jarvis.init;

</script>
</body>
</html>
